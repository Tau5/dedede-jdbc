CREATE TABLE IF NOT EXISTS "CatalogBook" (
	"ISBN" CHAR(13) NOT NULL UNIQUE,
	"title" TEXT NOT NULL,
	"author" TEXT NOT NULL,
	PRIMARY KEY("ISBN")
);




CREATE TABLE IF NOT EXISTS "User" (
	"id" BIGINT NOT NULL UNIQUE GENERATED BY DEFAULT AS IDENTITY,
	"name" TEXT NOT NULL,
	"surname" TEXT NOT NULL,
	PRIMARY KEY("id")
);




CREATE TABLE IF NOT EXISTS "Commodate" (
	"id" INTEGER NOT NULL UNIQUE GENERATED BY DEFAULT AS IDENTITY,
	"issue_date" DATE NOT NULL,
	"period_end" DATE NOT NULL,
	"user_ID" BIGINT NOT NULL UNIQUE,
	"book_ID" BIGINT NOT NULL,
	PRIMARY KEY("id")
);




CREATE TABLE IF NOT EXISTS "Book" (
	"id" INTEGER NOT NULL UNIQUE GENERATED BY DEFAULT AS IDENTITY,
	"book_ISBN" CHAR(13) NOT NULL,
	PRIMARY KEY("id")
);



ALTER TABLE "Commodate"
ADD FOREIGN KEY("user_ID") REFERENCES "User"("id")
ON UPDATE NO ACTION ON DELETE NO ACTION;
ALTER TABLE "Commodate"
ADD FOREIGN KEY("book_ID") REFERENCES "Book"("id")
ON UPDATE NO ACTION ON DELETE NO ACTION;
ALTER TABLE "Book"
ADD FOREIGN KEY("book_ISBN") REFERENCES "CatalogBook"("ISBN")
ON UPDATE NO ACTION ON DELETE NO ACTION;